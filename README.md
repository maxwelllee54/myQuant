# 🚀 Quant-Investor V4.0

<div align="center">

**一个端到端的AI量化投资平台**

*数据驱动 · 因子优先 · 深度分析 · 多空辩论 · 风险控制*

[![Version](https://img.shields.io/badge/Version-4.0-blue.svg)](https://github.com/maxwelllee54/myQuant)
[![Python](https://img.shields.io/badge/Python-3.8+-green.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## 📖 项目简介

**Quant-Investor** 是一个整合了量化分析与AI深度思辨的智能投资研究平台。V4.0版本实现了**统一化主流水线**，将从V2.3到V3.6的所有能力无缝整合，提供标准化的端到端投资分析流程。

### 核心投资逻辑

```
原始数据 → 因子挖掘 → 选股推荐 → 深度分析 → 多空辩论 → 风险评估 → 投资建议
```

1. **数据驱动**：以原始数据为核心（个股、期货期权、行业、市场、宏观经济数据）
2. **因子优先**：挖掘现阶段有效的量化因子，提供交易信号
3. **深度分析**：通过大模型对公司进行多维度深度分析
4. **多空辩论**：大模型多角度多轮多空辩论，形成平衡观点
5. **风险控制**：从风险管理角度评判投资建议，提供风控措施

---

## ✨ 核心特性

### 分层架构概览

| 层级 | 版本 | 核心能力 |
|:---|:---|:---|
| **🎯 统一层** | V4.0 | 统一主流水线，标准化端到端流程 |
| **🧠 智能层** | V3.6 | 多LLM支持（OpenAI/Gemini/DeepSeek/千问/Kimi） |
| **🔬 因子层** | V3.2-V3.5 | 动态因子挖掘 + 工业级分析 + 海量因子库 + 深度合成 |
| **💬 决策层** | V2.9 | 多Agent辩论系统，深度基本面分析 |
| **⚠️ 风控层** | V2.8 | 全面风险评估，VaR/CVaR/压力测试 |
| **📊 数据层** | V2.7-V3.0 | 持久化存储 + 全景数据（期货期权/行业） |

---

## 🎯 V4.0 统一主流水线

V4.0的核心创新是构建了一个**标准化的端到端投资分析流程**，用户无需特别说明即可自动执行完整分析：

```
┌─────────────────────────────────────────────────────────────────────┐
│                    V4.0 统一主流水线 (Master Pipeline)               │
├─────────────────────────────────────────────────────────────────────┤
│  第一阶段        第二阶段        第三阶段        第四阶段        第五阶段  │
│  数据获取   →   因子挖掘   →   定性分析   →   多空辩论   →   风险评估  │
│                  选股推荐        估值分析        投资建议        风控措施  │
└─────────────────────────────────────────────────────────────────────┘
```

### 第一阶段：数据获取

根据市场类型自动下载相应数据：

| 市场 | 股票池 | 宏观数据 | 行业数据 |
|:---|:---|:---|:---|
| **美股(US)** | NASDAQ100 + S&P500 | 美联储利率、CPI、PMI、VIX | GICS行业分类 |
| **A股(CN)** | 沪深300 + 中证1000 | 央行利率、CPI、PMI、社融 | 申万行业分类 |

### 第二阶段：因子挖掘与选股

- 基于个股交易数据和财务数据计算因子
- 结合宏观经济数据和行业数据进行因子验证
- 使用IC/IR分析、分组回测等方法筛选有效因子
- 基于有效因子推荐3-5只股票
- 对用户持仓股票进行因子分析

### 第三阶段：定性分析（大模型深度分析）

对推荐股票和持仓股票进行深度价值投资判断：

| 分析维度 | 具体内容 |
|:---|:---|
| **商业模式** | 收入来源、盈利模式、客户群体 |
| **护城河** | 品牌、技术、规模、网络效应、定价权 |
| **竞争格局** | 市场份额、竞争优势、行业集中度 |
| **增长前景** | 驱动因素、新业务机会、未来预期 |
| **行业周期** | 周期位置、驱动因素、持续时间 |

### 第四阶段：估值与多空辩论

**估值方法**：
- DCF估值：现金流折现模型
- 反向DCF：当前股价隐含的增长预期
- 可比公司法：与同行业公司估值对比

**多空辩论流程**：
1. 多方陈述：列举看多理由和证据
2. 空方质疑：挑战多方观点，指出风险
3. 多方回应：反驳空方观点
4. 综合结论：形成平衡的投资建议

### 第五阶段：风险评估与控制

| 风险类别 | 具体指标/措施 |
|:---|:---|
| **风险指标** | 波动率、最大回撤、VaR、CVaR、夏普比率 |
| **风险预警** | 识别高风险因素 |
| **压力测试** | 模拟极端市场情景 |
| **风控措施** | 止损设置、仓位控制、分散投资 |

---

## 🧠 V3.6 多LLM支持

支持多种主流大模型，可根据需求灵活切换：

| LLM提供商 | 模型 | 环境变量 | 特点 |
|:---|:---|:---|:---|
| **OpenAI** | GPT-4 | `OPENAI_API_KEY` | 综合能力强，推理深度 |
| **Gemini** | gemini-2.5-flash | `GEMINI_API_KEY` | 多模态，长上下文 |
| **DeepSeek** | deepseek-chat | `DEEPSEEK_API_KEY` | 性价比高，中文优秀 |
| **阿里千问** | qwen-plus | `DASHSCOPE_API_KEY` | 中文理解强，金融专业 |
| **Kimi** | moonshot-v1-8k | `MOONSHOT_API_KEY` | 长文本处理 |

---

## 🔬 V3.2-V3.5 因子工程体系

| 版本 | 模块 | 核心能力 |
|:---|:---|:---|
| **V3.5** | 深度特征合成 | 借鉴DFS思想，递归生成多层复杂特征 |
| **V3.4** | 海纳百川因子库 | 集成Qlib Alpha158 + tsfresh 100+特征 |
| **V3.3** | 工业级因子分析 | Alphalens风格Tear Sheet报告 |
| **V3.2** | 动态因子挖掘 | 遗传规划自动生成、验证、淘汰因子 |

---

## 💬 V2.9 多Agent辩论系统

模拟顶级投研团队的工作模式：

| Agent | 角色 | 分析维度 |
|:---|:---|:---|
| **财务分析师** | 财务健康度评估 | 盈利能力、偿债能力、现金流 |
| **行业分析师** | 行业周期分析 | 竞争格局、技术趋势、市场空间 |
| **战略分析师** | 护城河评估 | 商业模式、定价权、竞争优势 |
| **估值分析师** | 内在价值评估 | DCF、反向DCF、可比公司法 |
| **风控官** | 风险识别 | 定性风险、黑天鹅事件 |

---

## ⚠️ V2.8 风险管理模块

| 指标类别 | 具体指标 |
|:---|:---|
| **收益风险** | 波动率、最大回撤、Calmar比率 |
| **尾部风险** | VaR、CVaR、偏度、峰度 |
| **风险调整** | 夏普比率、索提诺比率、信息比率 |
| **因子风险** | 市场Beta、风格暴露、因子归因 |

---

## 🚀 快速开始

### 环境配置

```bash
# 克隆仓库
git clone https://github.com/maxwelllee54/myQuant.git
cd myQuant

# 安装依赖
pip install pandas numpy yfinance akshare tushare scipy
pip install openai google-generativeai
```

### API密钥配置

创建配置文件 `~/.quant_investor/credentials.env`：

```bash
# LLM API Keys
OPENAI_API_KEY=sk-...
GEMINI_API_KEY=...
DEEPSEEK_API_KEY=sk-...
DASHSCOPE_API_KEY=sk-...

# 数据源 API Keys
TUSHARE_TOKEN=...
```

### 使用示例

#### 方式1：Manus技能调用

```
/quant-investor 分析美股市场

/quant-investor 分析我的持仓：AAPL 25%, MSFT 25%, GOOGL 20%

/quant-investor 分析A股市场，推荐5只股票
```

#### 方式2：Python代码调用

```python
import sys
sys.path.append("scripts/v4.0")
from master_pipeline import run_analysis

# 分析美股市场
result = run_analysis(market="US")

# 分析A股市场，带持仓
result = run_analysis(
    market="CN",
    holdings=[
        {"code": "600519", "name": "贵州茅台", "weight": 0.3},
        {"code": "000858", "name": "五粮液", "weight": 0.2}
    ]
)

# 打印完整报告
print(result.full_report)

# 查看投资建议
for rec in result.recommendations:
    print(f"{rec.stock_code}: {rec.action} - {rec.rationale[:50]}...")
```

---

## 📊 输出示例

分析完成后，系统会生成包含以下内容的完整报告：

### 执行摘要

```markdown
- 有效因子: 发现 12 个当前有效的量化因子
- 推荐股票: 筛选出 5 只具有投资价值的股票
- 风险等级: 组合整体风险等级为 **中等**
```

### 投资建议

| 股票 | 行动 | 目标权重 | 风险等级 | 核心逻辑 |
|:---|:---|:---|:---|:---|
| AAPL | **买入** | 8% | 低 | 护城河深厚，现金流强劲... |
| NVDA | **谨慎买入** | 5% | 中 | AI领导者，估值偏高... |

### 风控措施

1. 设置组合整体止损线：-15%
2. 单只股票最大仓位不超过10%
3. 行业集中度控制在30%以内

---

## 📁 项目结构

```
myQuant/
├── scripts/
│   ├── v4.0/                    # 🎯 统一主流水线
│   │   ├── master_pipeline.py   # 主流水线入口
│   │   ├── data_provider.py     # 数据获取模块
│   │   ├── quant_selector.py    # 因子挖掘与选股
│   │   ├── qualitative_analyzer.py  # 定性分析与估值
│   │   └── risk_assessor.py     # 风险评估与控制
│   │
│   ├── v3.6/                    # 🧠 多LLM适配器
│   ├── v3.5/                    # 深度特征合成
│   ├── v3.4/                    # 海纳百川因子库
│   ├── v3.3/                    # 工业级因子分析
│   ├── v3.2/                    # 动态因子挖掘
│   ├── v3.1/                    # 动态智能框架
│   ├── v3.0/                    # 全景数据层
│   ├── v2.9/                    # 多Agent辩论
│   ├── v2.8/                    # 风险管理
│   └── v2.7/                    # 持久化存储
│
└── README.md
```

---

## 📈 版本演进

| 版本 | 发布日期 | 核心特性 |
|:---|:---|:---|
| **V4.0** | 2026-02-04 | 统一主流水线，整合所有能力 |
| V3.6 | 2026-02-04 | 多LLM支持（DeepSeek/千问/Kimi） |
| V3.5 | 2026-02-04 | 深度特征合成引擎 |
| V3.4 | 2026-02-04 | 海纳百川因子库 |
| V3.3 | 2026-02-04 | 工业级因子分析 |
| V3.2 | 2026-02-04 | 动态因子挖掘系统 |
| V3.1 | 2026-02-04 | 动态智能框架 |
| V3.0 | 2026-02-04 | 全景数据层 |
| V2.9 | 2026-02-04 | 多Agent辩论系统 |
| V2.8 | 2026-02-04 | 风险管理模块 |
| V2.7 | 2026-02-04 | 持久化数据存储 |

---

## ⚠️ 免责声明

本项目生成的所有分析报告和投资建议**仅供参考**，不构成任何投资建议。投资有风险，入市需谨慎。使用者应自行承担投资决策的全部责任。

---

## 📄 许可证

本项目采用 MIT 许可证。

---

<div align="center">

**Built with ❤️ by Maxwell & Manus AI**

⭐ 如果这个项目对你有帮助，请给个Star支持一下！

</div>
